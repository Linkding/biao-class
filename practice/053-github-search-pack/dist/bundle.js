!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){var o,i=n(1);e.exports={get_keyword:function(){return o},set_keyword:function(e){return o=e},set_amount:function(e){return e},test:function(){var e=i.get_store("history_list");console.log(e)}}},function(e,t,n){var o;n(0).get_keyword();function i(){o=l("history_list")||[]}function r(e,t){var n=e.indexOf(t);return-1!=n&&(e.splice(n,1),!0)}function s(e){a("history_list",e)}function a(e,t){var n=JSON.stringify(t);localStorage.setItem(e,n)}function l(e){var t=localStorage.getItem(e);return t=JSON.parse(t)}e.exports={set_store:a,get_store:l,append_history:function(e){r(o,e),o.unshift(e),s(o)},find_and_delete:r,over_write_history:s,reload_history_list:i,get_history_list:function(){return o||i(),o}}},function(e,t,n){var o=n(0);function i(e,t){var n={page:1,limit:5,keyword:o.get_keyword()};e=Object.assign({},n,e),console.log("发射出去的page="+e.page+"  limit="+e.limit);var i=new XMLHttpRequest;i.open("get","https://api.github.com/search/users?q="+e.keyword+"&page="+e.page+"&per_page="+e.limit),i.send(),i.addEventListener("load",function(e){e=JSON.parse(this.responseText);t(e)})}e.exports={user:i,search_amount:function(){i("",function(e){return e.total_count})}}},function(e,t,n){var o,i=n(4),r=(n(0),n(2)),s=(document.getElementById("user-list"),document.querySelector(".pagination-container")),a=document.querySelector(".pagination"),l=document.getElementById("first-page"),c=document.getElementById("last-page"),u=5,d=5,_=1;e.exports={render_pagination:function e(t){s.hidden=!1,function(e){e.innerHTML=""}(a),function(e){e<u?(o=1,d=1,console.log("到达1")):(o=Math.ceil(e/u),d=5,console.log("到达2"))}(t),console.log("page_amount: "+o+"  max_btn: "+d);var n,g,f=Math.ceil(d/2),p=_>=o-f;_<=f?(n=1,g=d,console.log("reach_left")):p?(n=o-d,g=o,console.log("reaching_right")):(n=_-(f-1),g=_+(f-1),console.log("reahing_middle")),n<1&&(n=1),console.log("current_page: "+_+"   start: "+n+"   end:"+g+"  middle:"+f);for(var h=n;h<=g;h++){var m=h,y=document.createElement("button");y.innerText=m,y.dataset.page=m,_==m&&(y.style.background="pink"),a.appendChild(y),y.addEventListener("click",function(){_=parseInt(this.dataset.page),console.log("点击current_page按钮第"+_),console.log("max_btn_length"+d),e(t);var n={page:this.dataset.page,limit:u};r.user(n,function(e){i.render_user_list(e)})}),l.addEventListener("click",function(){console.log("click first page"),_=1,e(t);var n={page:1,limit:u};r.user(n,function(e){i.render_user_list(e)})}),c.addEventListener("click",function(){console.log("click 最后 page"),_=o,e(t);var n={page:o,limit:u};r.user(n,function(e){i.render_user_list(e)})})}}}},function(e,t,n){var o=n(1),i=n(0),r=n(2),s=n(3),a=document.getElementById("form-search"),l=document.getElementById("search-input"),c=document.getElementById("user-list"),u=document.getElementById("load-more"),d=document.querySelector(".history-list");o.get_history_list();function _(e,t){t=t||"";e.items.forEach(function(e){t+=`\n                <div class="user">\n                <div class="logo">\n                    <img src="${e.avatar_url}">\n                </div>\n                <div class="info">\n                    <div class="name">${e.login}</div>\n                    <a href="${e.html_url}" class="link">${e.html_url}</a>\n                </div>\n                </div>\n                `}),c.innerHTML=t,document.querySelector("#count").innerHTML=`共有${e.total_count}条结果`}e.exports={form:a,input:l,load_more:u,render_user_list:_,render_history_list:function e(){d.innerHTML="",console.log(o.get_history_list()),o.get_history_list().forEach(function(t){var n,a=document.createElement("div");a.classList.add("history"),a.dataset.history=t,a.innerHTML=`\n        <div class="text">${t}</div>\n        <div class="tool">\n            <span class="delete">删除</span>\n        </div>\n        `,d.appendChild(a),n=a.querySelector(".delete"),a.addEventListener("click",function(e){e.target.classList.contains("delete")||(i.set_keyword(this.dataset.history),r.user(i.get_keyword(),function(e){_(e),amount=e.total_count,s.render_pagination(amount)}))}),n.addEventListener("click",function(t){var n=this.closest(".history").dataset.history;o.find_and_delete(o.get_history_list(),n)&&(o.over_write_history(d),setTimeout(function(){e()},0),o.get_history_list().length||(d.hidden=!0))})})},show_history_list:function(){d.hidden=!1},hide_history_list:function(){d.hidden=!0},show_load_more:function(){u.hidden=!1},hide_load_more:function(){u.hidden=!0}}},function(e,t,n){var o=n(4),i=n(2),r=n(1),s=n(0),a=n(3),l=1,c=4,u=document.getElementById("user-list");e.exports={add_event:function(){o.form.addEventListener("submit",function(e){e.preventDefault(),keyword=s.set_keyword(o.input.value),keyword&&(i.user("",function(e){console.log(e),o.render_user_list(e),o.hide_load_more(),amount=e.total_count,a.render_pagination(amount)}),r.append_history(keyword))}),o.load_more.addEventListener("click",function(){console.log("click load more"),console.log("发射之前page="+l);var e={page:++l,limit:c};console.log("准备发射page="+l),i.user(e,function(e){o.render_user_list(e,u.innerHTML),amount=e.total_count,a.render_pagination(amount)})}),o.input.addEventListener("click",function(e){o.render_history_list(),o.show_history_list()}),document.documentElement.addEventListener("click",function(e){var t=e.target,n=t.closest("#search-input");t.closest(".history-list")||n||o.hide_history_list()})}}},function(e,t,n){var o=n(5),i=(n(0),n(1));i.get_history_list();i.reload_history_list(),o.add_event()}]);