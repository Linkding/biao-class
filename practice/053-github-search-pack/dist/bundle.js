!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){var o,i=n(1);e.exports={get_keyword:function(){return o},set_keyword:function(e){return o=e},set_amount:function(e){return e},test:function(){var e=i.get_store("history_list");console.log(e)}}},function(e,t,n){var o;n(0).get_keyword();function i(){o=c("history_list")||[]}function r(e,t){var n=e.indexOf(t);return-1!=n&&(e.splice(n,1),!0)}function s(e){a("history_list",e)}function a(e,t){var n=JSON.stringify(t);localStorage.setItem(e,n)}function c(e){var t=localStorage.getItem(e);return t=JSON.parse(t)}e.exports={set_store:a,get_store:c,append_history:function(e){r(o,e),o.unshift(e),s(o)},find_and_delete:r,over_write_history:s,reload_history_list:i,get_history_list:function(){return o||i(),console.log("获取历史记录"+o),o}}},function(e,t,n){var o=n(0);function i(e,t){var n={page:1,limit:5,keyword:o.get_keyword()};e=Object.assign({},n,e),console.log("发射出去的page="+e.page+"  limit="+e.limit);var i=new XMLHttpRequest;i.open("get","https://api.github.com/search/users?q="+e.keyword+"&page="+e.page+"&per_page="+e.limit),i.setRequestHeader("Authorization","Basic "+btoa("linkding:0e2af1765ccb10d1021de3dec9cb5c1f3d3ffe78")),i.send(),i.addEventListener("load",function(e){e=JSON.parse(this.responseText);t(e)})}e.exports={user:i,search_amount:function(){i("",function(e){return e.total_count})}}},function(e,t,n){var o=n(1),i=n(0),r=n(2),s=n(4),a=document.getElementById("form-search"),c=document.getElementById("search-input"),l=document.getElementById("user-list"),u=document.getElementById("load-more"),d=document.querySelector(".history-list");o.get_history_list();function _(e,t){t=t||"";e.items.forEach(function(e){t+=`\n                <div class="user">\n                <div class="logo">\n                    <img src="${e.avatar_url}">\n                </div>\n                <div class="info">\n                    <div class="name">${e.login}</div>\n                    <a href="${e.html_url}" class="link">${e.html_url}</a>\n                </div>\n                </div>\n                `}),l.innerHTML=t,document.querySelector("#count").innerHTML=`共有${e.total_count}条结果`}e.exports={form:a,input:c,load_more:u,render_user_list:_,render_history_list:function e(){d.innerHTML="",console.log(o.get_history_list()),o.get_history_list().forEach(function(t){var n,a=document.createElement("div");a.classList.add("history"),a.dataset.history=t,a.innerHTML=`\n        <div class="text">${t}</div>\n        <div class="tool">\n            <span class="delete">删除</span>\n        </div>\n        `,d.appendChild(a),n=a.querySelector(".delete"),a.addEventListener("click",function(e){e.target.classList.contains("delete")||(c.value=this.dataset.history,i.set_keyword(this.dataset.history),r.user(i.get_keyword(),function(e){_(e),amount=e.total_count,s.render_pagination(amount)}))}),n.addEventListener("click",function(t){var n=this.closest(".history").dataset.history;o.find_and_delete(o.get_history_list(),n)&&(o.over_write_history(d),setTimeout(function(){e()},0),o.get_history_list().length||(d.hidden=!0))})})},show_history_list:function(){d.hidden=!1},hide_history_list:function(){d.hidden=!0},show_load_more:function(){u.hidden=!1},hide_load_more:function(){u.hidden=!0}}},function(e,t,n){var o,i=n(3),r=(n(0),n(2)),s=(document.getElementById("user-list"),document.querySelector(".pagination-container")),a=document.querySelector(".pagination"),c=5,l=5,u=1;function d(e){i=n(3),s.hidden=!1,function(e){e.innerHTML=""}(a),_(e),console.log("page_amount: "+o+"  max_btn: "+l);var t,f,g=Math.ceil(l/2),m=u>=o-g;u<=g?(t=1,f=l,console.log("reach_left")):m?(t=o-l,f=o,console.log("reaching_right")):(t=u-(g-1),f=u+(g-1),console.log("reahing_middle")),t<1&&(t=1),console.log("current_page: "+u+"   start: "+t+"   end:"+f+"  middle:"+g);for(var h=t;h<=f;h++){var p=h,y=document.createElement("button");y.innerText=p,y.dataset.page=p,u==p&&(y.style.background="pink"),a.appendChild(y),y.addEventListener("click",function(){u=parseInt(this.dataset.page),console.log("点击current_page按钮第"+u),console.log("max_btn_length"+l),d(e);var t={page:this.dataset.page,limit:c};r.user(t,function(e){i.render_user_list(e)})})}}function _(e){e<c?(o=1,l=1):(o=Math.ceil(e/c),l=5)}e.exports={render_pagination:d,click_first_page:function(e){u=1;var t={page:1,limit:c,keyword:e};r.user(t,function(e){i.render_user_list(e),amount=e.total_count,d(amount)})},click_last_page:function(e){var t={page:o,limit:c,keyword:e};r.user(t,function(e){i.render_user_list(e),amount=e.total_count,_(amount),u=o,console.log("最后一页："+o),d(amount)})}}},function(e,t,n){var o=n(3),i=n(2),r=n(1),s=n(0),a=n(4),c=document.getElementById("first-page"),l=document.getElementById("last-page"),u=1,d=4,_=document.getElementById("user-list"),f=document.getElementById("search-input");e.exports={add_event:function(){o.form.addEventListener("submit",function(e){e.preventDefault(),keyword=s.set_keyword(o.input.value),keyword&&(i.user("",function(e){console.log(e),o.render_user_list(e),o.hide_load_more(),amount=e.total_count,a.render_pagination(amount)}),r.append_history(keyword))}),o.load_more.addEventListener("click",function(){var e={page:++u,limit:d};i.user(e,function(e){o.render_user_list(e,_.innerHTML),amount=e.total_count,a.render_pagination(amount)})}),o.input.addEventListener("click",function(e){o.render_history_list(),o.show_history_list()}),document.documentElement.addEventListener("click",function(e){var t=e.target,n=t.closest("#search-input");t.closest(".history-list")||n||o.hide_history_list()}),c.addEventListener("click",function(e){console.log("此时的关键字"+f.value),keyword=f.value,a.click_first_page(keyword)}),l.addEventListener("click",function(){console.log("此时的关键字"+f.value),keyword=f.value,a.click_last_page(keyword)})}}},function(e,t,n){var o=n(5),i=(n(0),n(1));i.get_history_list();i.reload_history_list(),o.add_event()}]);