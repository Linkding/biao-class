<script>

    var max_id = 1;
    var todo_list = [
        {
            id: 1,
            name: 'lxb',
            completed: false
        }
    ]


    function add(row) {
        var id = max_id + 1;
        row.id = id;
        todo_list.push(row);
    }

    function remove(id) {
        var index_num = find_index_by_id(todo_list, id);
        todo_list.splice(index_num, 1);
    }

    function update(id, new_row) {
        var index_num = find_index_by_id(todo_list, id);
        if (index_num < 0)
            return;
        var old_row = todo_list[index_num];
        todo_list[index_num] = Object.assign({}, old_row, new_row);
    }

    function read(id) {
        if (id)
            return find_by_id(id);
        return todo_list
    }
    // 功能函数
    function find_index_by_id(arr, id) {
        return arr.findIndex(function (item) {
            return item.id == id;
        });
    }

    function find_by_id(id) {
        var index = find_index_by_id(todo_list, id);
        return todo_list[index];
    }

    // =======测试区=======
    add({ name: 'hbb', completed: false })
    update(1,{name:'lxx',completed: true})

    console.log(todo_list)
    // console.log(remove(2))
    // console.log(todo_list)
    console.log(read(2))
    // console.log(find_by_id(2))
    

</script>